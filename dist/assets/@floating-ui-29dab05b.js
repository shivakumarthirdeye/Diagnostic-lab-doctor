function M(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const W=["top","right","bottom","left"];W.reduce((e,n)=>e.concat(n,n+"-start",n+"-end"),[]);function d(e){var n;return((n=e.ownerDocument)==null?void 0:n.defaultView)||window}function C(e){return d(e).getComputedStyle(e)}function D(e){return e instanceof d(e).Node}function N(e){return D(e)?(e.nodeName||"").toLowerCase():""}let y;function $(){if(y)return y;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(y=e.brands.map(n=>n.brand+"/"+n.version).join(" "),y):navigator.userAgent}function F(e){return e instanceof d(e).HTMLElement}function v(e){return e instanceof d(e).Element}function z(e){return typeof ShadowRoot>"u"?!1:e instanceof d(e).ShadowRoot||e instanceof ShadowRoot}function T(e){const{overflow:n,overflowX:o,overflowY:t,display:r}=C(e);return/auto|scroll|overlay|hidden|clip/.test(n+t+o)&&!["inline","contents"].includes(r)}function j(){return/^((?!chrome|android).)*safari/i.test($())}function q(e){return["html","body","#document"].includes(N(e))}const b=Math.round;function O(e){const n=C(e);let o=parseFloat(n.width)||0,t=parseFloat(n.height)||0;const r=F(e),c=r?e.offsetWidth:o,u=r?e.offsetHeight:t,i=b(o)!==c||b(t)!==u;return i&&(o=c,t=u),{width:o,height:t,fallback:i}}function V(e){return v(e)?e:e.contextElement}const B={x:1,y:1};function E(e){const n=V(e);if(!F(n))return B;const o=n.getBoundingClientRect(),{width:t,height:r,fallback:c}=O(n);let u=(c?b(o.width):o.width)/t,i=(c?b(o.height):o.height)/r;return u&&Number.isFinite(u)||(u=1),i&&Number.isFinite(i)||(i=1),{x:u,y:i}}function A(e,n,o,t){var r,c;n===void 0&&(n=!1),o===void 0&&(o=!1);const u=e.getBoundingClientRect(),i=V(e);let f=B;n&&(t?v(t)&&(f=E(t)):f=E(e));const g=i?d(i):window,h=j()&&o;let a=(u.left+(h&&((r=g.visualViewport)==null?void 0:r.offsetLeft)||0))/f.x,l=(u.top+(h&&((c=g.visualViewport)==null?void 0:c.offsetTop)||0))/f.y,s=u.width/f.x,L=u.height/f.y;if(i){const R=d(i),H=t&&v(t)?d(t):t;let m=R.frameElement;for(;m&&t&&H!==R;){const w=E(m),p=m.getBoundingClientRect(),S=getComputedStyle(m);p.x+=(m.clientLeft+parseFloat(S.paddingLeft))*w.x,p.y+=(m.clientTop+parseFloat(S.paddingTop))*w.y,a*=w.x,l*=w.y,s*=w.x,L*=w.y,a+=p.x,l+=p.y,m=d(m).frameElement}}return M({width:s,height:L,x:a,y:l})}function X(e){return((D(e)?e.ownerDocument:e.document)||window.document).documentElement}function Y(e){if(N(e)==="html")return e;const n=e.assignedSlot||e.parentNode||z(e)&&e.host||X(e);return z(n)?n.host:n}function k(e){const n=Y(e);return q(n)?n.ownerDocument.body:F(n)&&T(n)?n:k(n)}function x(e,n){var o;n===void 0&&(n=[]);const t=k(e),r=t===((o=e.ownerDocument)==null?void 0:o.body),c=d(t);return r?n.concat(c,c.visualViewport||[],T(t)?t:[]):n.concat(t,x(t))}function G(e,n,o,t){t===void 0&&(t={});const{ancestorScroll:r=!0,ancestorResize:c=!0,elementResize:u=!0,animationFrame:i=!1}=t,f=r||c?[...v(e)?x(e):e.contextElement?x(e.contextElement):[],...x(n)]:[];f.forEach(l=>{const s=!v(l)&&l.toString().includes("V");!r||i&&!s||l.addEventListener("scroll",o,{passive:!0}),c&&l.addEventListener("resize",o)});let g,h=null;u&&(h=new ResizeObserver(()=>{o()}),v(e)&&!i&&h.observe(e),v(e)||!e.contextElement||i||h.observe(e.contextElement),h.observe(n));let a=i?A(e):null;return i&&function l(){const s=A(e);!a||s.x===a.x&&s.y===a.y&&s.width===a.width&&s.height===a.height||o(),a=s,g=requestAnimationFrame(l)}(),o(),()=>{var l;f.forEach(s=>{r&&s.removeEventListener("scroll",o),c&&s.removeEventListener("resize",o)}),(l=h)==null||l.disconnect(),h=null,i&&cancelAnimationFrame(g)}}export{G as z};
